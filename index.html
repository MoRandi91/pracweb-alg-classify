<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <title>PracWeb</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="">
    <meta name="author" content="">

    <!-- Le styles -->
    <link href="css/bootstrap.css" rel="stylesheet">
    <style>
      .axis path,
      .axis line {
        fill: none;
        stroke: #000;
        shape-rendering: crispEdges;
      }

      .axis text {
        font-size: 10px;
      }

      .dot {
        stroke: #000;
        opacity: 0.7;
      }
    </style>
    <!-- <link href="css/bootstrap-responsive.css" rel="stylesheet"> -->

    <!-- HTML5 shim, for IE6-8 support of HTML5 elements -->
    <!--[if lt IE 9]>
      <script src="js/html5shiv.js"></script>
    <![endif]-->
  </head>

  <body>
    <div class="container-fluid">
      <div class="page-header">
        <h1> Классификатор </h1>
      </div>
      <div class="row-fluid">
        <div class="span3">
          <form>
            <legend>Настройки</legend>
            <label for="opModel">Модель операторов</label>
            <select id="opModel">
              <option>Линейная</option>
              <option>Байесовская</option>
              <option>Сравнение с эталоном</option>
              <option>K ближайших соседей</option>
              <option>Парзеновское окно</option>
              <option>Потенциальные функции</option>
              <option>Общий метрический алгоритм</option>
              <option>Алгоритм вычисления оценок</option>
              <option>Нейросети</option>
              <option>Решающие деревья</option>
            </select>
            <label for="corrOp">Корректирующая операция</label>
            <select id="corrOp">
              <option>Линейная</option>
              <option>Настоящая линейная</option>
              <option>Выбор независимого оптимума</option>
              <option>Выбор зависимого оптимума</option>
              <option>Комитет старшинства с индивидуальными классами</option>
              <option>Комитет старшинства с наборами классов</option>
              <option>Комитет большинства</option>
              <option>Решающее дерево</option>
            </select>
            <label for="colorMode">Режим раскраски</label>
            <select id="colorMode" disabled>
              <option>Не нужен</option>
              <option>Bar</option>
            </select>
            <label for="workMode">Режим работы</label>
            <select id="workMode" disabled>
              <option>Не нужен</option>
              <option>Bar</option>
            </select>
          </form>
        </div> <!-- /div left -->
        <div class="span6">
          <div class="well">
            <svg id="viewport">
            </svg>
          </div>
        </div> <!-- /div central -->
        <div class="span3">
          <legend>Информация</legend>
          <h4>Байесовская модель операторов</h4>
          Бла-бла-бла про байесовскую модель операторов.
          <h4>Линейная корректирующая операция</h4>
          Бла-бла-бла про линейную корректирующую операцию.
        </div> <!-- /div right -->
      </div>
    </div> <!-- /container -->
    <!-- Le javascript -->
    <script src="http://code.jquery.com/jquery-1.9.1.min.js"></script>
    <script src="http://d3js.org/d3.v3.min.js"></script>
    <!-- <script src="js/main.js"></script> -->
    <script>
      var fullSize = $("#viewport").parent().width();

      $("#viewport")
          .width(fullSize)
          .height(fullSize);

      $(window).resize(function() {
          fullSize = $("#viewport").parent().width();
          $("#viewport")
              .width(fullSize)
              .height(fullSize);
          //reflowVisual();
      });

      function reflowVisual() {
          var margin = {top: 20, right: 20, bottom: 30, left: 40},
              width = fullSize - margin.left - margin.right,
              height = fullSize - margin.top - margin.bottom;

          var x = d3.scale.linear()
              .range([0, width]);

          var y = d3.scale.linear()
              .range([height, 0]);

          var color = d3.scale.category10();

          var xAxis = d3.svg.axis()
              .scale(x)
              .orient("bottom");

          var yAxis = d3.svg.axis()
              .scale(y)
              .orient("left");

          var svg = d3.select("#viewport")
              .append("g")
              .attr("transform", "translate(" + margin.left + "," + margin.top + ")");

          function render(data) {
              x.domain(d3.extent(data, function(d) { return d.x; })).nice();
              y.domain(d3.extent(data, function(d) { return d.y; })).nice();

              // X axis
              svg.append("g")
                  .attr("class", "x axis")
                  .attr("transform", "translate(0," + height + ")")
                  .call(xAxis)
                .append("text")
                  .attr("class", "label")
                  .attr("x", width)
                  .attr("y", -6)
                  .style("text-anchor", "end")
                  .text("X");

              // Y axis
              svg.append("g")
                  .attr("class", "y axis")
                  .call(yAxis)
                .append("text")
                  .attr("class", "label")
                  .attr("transform", "rotate(-90)")
                  .attr("y", 6)
                  .attr("dy", ".71em")
                  .style("text-anchor", "end")
                  .text("Y")

              // Points
              svg.selectAll(".dot")
                  .data(data)
                .enter().append("path")
                  .attr("class", "dot")
                  .attr("transform", function(d) { return "translate(" + x(d.x) + "," + y(d.y) + ")"; })
                  .attr("d", d3.svg.symbol()
                    .type(function(d) { return d.t? "triangle-up" : "circle"; })
                    .size(function(d) { return d.t? 150 : 50; }))
                  .style("fill", function(d) { return color(d.c); });

              // Legend
              var legend = svg.selectAll(".legend")
                  .data(color.domain())
                  .enter().append("g")
                  .attr("class", "legend")
                  .attr("transform", function(d, i) { return "translate(0," + i * 20 + ")"; });

              legend.append("rect")
                  .attr("x", width - 18)
                  .attr("width", 18)
                  .attr("height", 18)
                  .style("fill", color);

              legend.append("text")
                  .attr("x", width - 24)
                  .attr("y", 9)
                  .attr("dy", ".35em")
                  .style("text-anchor", "end")
                  .text(function(d) { return d; });
            }

            var data = new Array();
            var gen1 = d3.random.normal(10, 5);
            var gen2 = d3.random.normal(20, 7);
            var gen3 = d3.random.normal(20, 5);
            var gen4 = d3.random.normal(5, 30);
            for (var i=0; i<25; ++i) {
              data.push({x: gen1(), 
                         y: gen2(), 
                         c: "Class A",
                         t: Math.random() > 0.7});
            }
            for (var i=0; i<25; ++i) {
              data.push({x: gen3(), 
                         y: gen4(), 
                         c: "Class B",
                         t: Math.random() > 0.6});
          }
          render(data);
      }
      reflowVisual();
    </script>
  </body>
</html>
